<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.140.0"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>langhaidian</title>
<meta name=keywords content="Blog,Portfolio,PaperMod"><meta name=description content="ExampleSite description"><meta name=author content="Me"><link rel=canonical href=https://langhaidian.github.io//><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=//assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://langhaidian.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://langhaidian.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://avatars.githubusercontent.com/u/539272><link rel=apple-touch-icon href=https://langhaidian.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://langhaidian.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://langhaidian.github.io//index.xml><link rel=alternate hreflang=en href=https://langhaidian.github.io//><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://langhaidian.github.io//"><meta property="og:site_name" content="langhaidian"><meta property="og:title" content="langhaidian"><meta property="og:description" content="ExampleSite description"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://langhaidian.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://langhaidian.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="langhaidian"><meta name=twitter:description content="ExampleSite description"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"langhaidian","url":"https://langhaidian.github.io//","description":"ExampleSite description","logo":"https://langhaidian.github.io/%3Clink%20/%20abs%20url%3E","sameAs":["https://www.instagram.com/langhaidian/","https://github.com/langhaidian/"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://langhaidian.github.io/ accesskey=h title="Home (Alt + H)"><img src=https://langhaidian.github.io/favicon.ico alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://langhaidian.github.io/archives/ title=å½’æ¡£><span>å½’æ¡£</span></a></li><li><a href=https://langhaidian.github.io/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://langhaidian.github.io/about/ title=å…³äº><span>å…³äº</span></a></li><li><a href=https://langhaidian.github.io/running_page title=running_page><span>running_page</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class="first-entry home-info"><header class=entry-header><h1>Hi there ğŸ‘‹</h1></header><div class=entry-content>Welcome to my blog</div><footer class=entry-footer><div class=social-icons><a href=https://www.instagram.com/langhaidian/ target=_blank rel="noopener noreferrer me" title=Instagram><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/><line x1="17.5" y1="6.5" x2="17.5" y2="6.5"/></svg>
</a><a href=https://github.com/langhaidian/ target=_blank rel="noopener noreferrer me" title=Github><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div></footer></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>linuxè®¾ç½®æ—¶é—´</h2></header><div class=entry-content><p>æœ€è¿‘ç¢°åˆ°æ­å»ºæµ‹è¯•k8sç¯å¢ƒï¼Œç³»ç»Ÿç‰ˆæœ¬å¤ªä½å¯¼è‡´å¾ˆå¤šé—®é¢˜ï¼Œè¿›è¡Œgoogleåæ•´ç†çš„å‡çº§æ­¥éª¤ï¼Œä¾›å‚è€ƒã€‚ 1. ç³»ç»Ÿæ—¶é—´æŸ¥çœ‹å’Œè®¾ç½® æŸ¥çœ‹ç³»ç»Ÿæ—¶é—´çš„å‘½ä»¤ï¼š #date è®¾ç½®ç³»ç»Ÿæ—¶é—´çš„å‘½ä»¤ï¼š #date +"æœˆ/æ—¥/å¹´ æ—¶:åˆ†:ç§’" [root@localhost sbin]# date +"12/13/2021 12:13:14" 12/13/2021 12:13:14 [root@localhost sbin]# date Sat May 29 18:02:37 CST 2021 2. è®¾ç½®ç¡¬ä»¶æ—¶é—´ æŸ¥çœ‹ç¡¬ä»¶æ—¶é—´çš„å‘½ä»¤ï¼š # hwclock è®¾ç½®ç¡¬ä»¶æ—¶é—´çš„å‘½ä»¤ï¼š # hwclock --set --date="æœˆ/æ—¥/å¹´ æ—¶:åˆ†:ç§’" [root@localhost sbin]# hwclock --set --date="2/1/2021 1:2:3" [root@localhost sbin]# hwclock Mon 01 Feb 2021 01:02:09 AM CST -0.848901 seconds å°†ç³»ç»Ÿæ—¶é—´å†™å…¥ç¡¬ä»¶æ—¶é—´ã€‚hwclock --systohc</p></div><footer class=entry-footer><span title='2024-08-10 11:04:49 +0800 CST'>August 10, 2024</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;56 words&nbsp;Â·&nbsp;langhaidian</footer><a class=entry-link aria-label="post link to linuxè®¾ç½®æ—¶é—´" href=https://langhaidian.github.io//posts/linux/linux%E8%AE%BE%E7%BD%AE%E6%97%B6%E9%97%B4/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>mkcertç”ŸæˆGeosceneServerè¯ä¹¦</h2></header><div class=entry-content><p>è§£å†³Geoscene Serverè¯ä¹¦è‡ªå·±ç”Ÿæˆç¢°åˆ°æµè§ˆå™¨ä¸ä¿¡ä»»é—®é¢˜ã€‚é‡‡ç”¨mkcertå·¥å…·ç”Ÿæˆç›¸å…³è¯ä¹¦ã€‚ å‡†å¤‡è½¯ä»¶ï¼š mkcertï¼š https://github.com/FiloSottile/mkcert/releases opensslï¼šhttps://slproweb.com/download/Win64OpenSSL_Light-1_1_1q.msi
è¯ä¹¦ç”Ÿæˆ å®šä½åˆ°mkcertç›®å½•ä¸‹ï¼ŒæŸ¥çœ‹å¸®åŠ©
mkcert --help å®‰è£…CAè¯ä¹¦
mkcert -install ç”Ÿæˆè¯ä¹¦,å¯ä»¥ç»™å®šipåœ°å€ï¼Œ*.portal.comé€šé…ç¬¦åŸŸåï¼Œå…·ä½“åŸŸågx42.portal.comç­‰ã€‚å½“å‰ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸¤ä¸ª.pemæ–‡ä»¶ã€‚
mkcert 192.168.28.42 192.168.28.215 "*.portal.com" gx42.portal.com å°†192.168.X.X-key.pemæ–‡ä»¶è½¬æ¢æˆkey openssl rsa -in 192.168.X.X.pem -out 192.168.X.X.key åˆ©ç”¨opensslç”Ÿæˆpfxè¯ä¹¦,è®¾å®šå¯†ç ä»¥åŠè®°å½•ç›¸å…³å¯†ç ï¼Œtomcaté…ç½®æ—¶ä½¿ç”¨ã€‚
openssl> pkcs12 -export -out d:\mkcert\192.168.X.X.pfx -in d:\mkcert\192.168.X.X.pem -inkey d:\mkcert\192.168.X.X.key æŸ¥æ‰¾CAè¯ä¹¦å®‰è£…ä½ç½®
mkcert -CAROOT å°† rootCA.pem è½¬æ¢æˆ.crtæ ¼å¼ï¼Œç”¨äºå®¢æˆ·ç«¯å®‰è£…è‡ªç­¾åè¯ä¹¦ä½¿ç”¨
openssl x509 -in rootCA.pem -out rootCA.crt åŒå‡»rootCA.crtè¿›è¡Œå®‰è£…,æŒ‰ç…§æç¤ºå°†è¯ä¹¦å­˜å‚¨åˆ°å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„ã€‚
é…ç½®tomcatè¯ä¹¦ä¿¡æ¯
&lt;!--&lt;Connector port="8443" protocol="org.apache.coyote.http11.Http11NioProtocol....>" --> Modify the connector to match the parameters below: &lt;Connector port="443" protocol="org.apache.coyote.http11.Http11AprProtocol" maxThreads="150" SSLEnabled="true" > &lt;UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol" /> &lt;SSLHostConfig> &lt;Certificate certificateKeystoreFile="conflocalhost-rsa-key.pem" certificateKeystorePassword="con" type="RSA" /> &lt;/SSLHostConfig> &lt;/Connector> &lt;Connector port="443" protocol="org.apache.coyote.http11.Http11AprProtocol" maxThreads="150" SSLEnabled="true" > &lt;UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol" /> &lt;SSLHostConfig> &lt;Certificate certificateKeystoreFile="conf/ssl/172.26.156.21.pfx" certificateKeystorePassword="gxzb@123" type="PKCS12" /> &lt;/SSLHostConfig> &lt;/Connector> keytools: keytool -genkey -alias mykey -keyalg RSA -keystore keystore.jks -validity 3650 &lt;Connector port="443" protocol="org.apache.coyote.http11.Http11AprProtocol" maxThreads="150" SSLEnabled="true" scheme="https" secure="true" keystoreFile="/path/to/keystore.jks" keystorePass="password" clientAuth="false" sslProtocol="TLS"/> &lt;Connector port="443" protocol="org.apache.coyote.http11.Http11NioProtocol" maxThreads="550" SSLEnabled="true" scheme="https" secure="true" keystoreFile="ssl/anyangarcgis.jks" keystorePass="anyang" clientAuth="false" sslProtocol="TLS"/> &lt;Connector port="443" protocol="org.apache.coyote.http11.Http11NioProtocol" maxThreads="550" SSLEnabled="true"> &lt;UpgradeProtocol className="org.apache.coyote.http2.Http2Protocol"/> &lt;SSLHostConfig> &lt;Certificate certificateKeystoreFile="conf/cert/xkcdxgx.pfx" certificateKeystorePassword="anyang" type="RSA"/> &lt;/SSLHostConfig> &lt;/Connector> {"WebContextURL":"https://59.227.104.202/arcgis"} nginx: server { listen 443 ssl; server_name 59.227.104.202 10.10.146.36 gx36.portal.com; ssl_certificate /etc/nginx/ssl/gx36.portal.com+5.pem ssl_certificate_key /etc/nginx/ssl/gx36.portal.com+5-key.pem ssl_session_cache shared:SSL:1m; ssl_session_timeout 5m; ssl_ciphers HIGH:!aNULL:!MD5; ssl_prefer_server_ciphers on; location /server { proxy_pass https://gx36.portal.com/server; proxy_ignore_client_abort on; proxy_cookie_path /server /server proxy_set_header Host $host:$server_port; proxy_set_header X-Real-IP ""; # ArcGIS Server è¦æ±‚å¿…é¡»æ·»åŠ  X-Forwarded-Host åä»£æ ‡å¤´ proxy_set_header X-Real-PORT $remote_port; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } location /arcgis { proxy_pass https://gx36.portal.com/arcgis; proxy_ignore_client_abort on; proxy_cookie_path /arcgis /arcgis proxy_set_header Host $host:$server_port; proxy_set_header X-Real-IP ""; # ArcGIS Server è¦æ±‚å¿…é¡»æ·»åŠ  X-Forwarded-Host åä»£æ ‡å¤´ proxy_set_header X-Real-PORT $remote_port; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } }</p></div><footer class=entry-footer><span title='2024-08-10 11:04:49 +0800 CST'>August 10, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;225 words&nbsp;Â·&nbsp;langhaidian</footer><a class=entry-link aria-label="post link to mkcertç”ŸæˆGeosceneServerè¯ä¹¦" href=https://langhaidian.github.io//posts/linux/mkcert%E7%94%9F%E6%88%90geosceneserver%E8%AF%81%E4%B9%A6/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>è·‘æ­¥é¡µé¢æ­å»º</h2></header><div class=entry-content><p>1. å‚è€ƒä»“åº“ https://github.com/yihong0618/running_page 2. è‡ªå·±æ­å»ºå®Œçš„ä»“åº“ https://github.com/langhaidian/running_page 3. æ•ˆæœå±•ç¤ºå†…å®¹ vercelç«™ç‚¹â€œrunning pageâ€ github.ioç«™ç‚¹â€œrunning pageâ€</p></div><footer class=entry-footer><span title='2024-08-10 11:04:49 +0800 CST'>August 10, 2024</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;12 words&nbsp;Â·&nbsp;langhaidian</footer><a class=entry-link aria-label="post link to è·‘æ­¥é¡µé¢æ­å»º" href=https://langhaidian.github.io//posts/other/running/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>geoscen serveråŸºç¡€éƒ¨ç½²-centos 7.6</h2></header><div class=entry-content><p>1. å‡†å¤‡å·¥ä½œ 1.1 å…³é—­é˜²ç«å¢™
åœæ­¢é˜²ç«å¢™ï¼šsystemctl stop firewalld.service ç¦ç”¨é˜²ç«å¢™çš„å¼€æœºå¯åŠ¨ï¼šsystemctl disable firewalld.service æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼šsystemctl status firewalld.service 1.2 ç”¨æˆ·å’Œç»„åˆ›å»º
# groupadd xcy # useradd -g xcy -m geoscene //ç»‘å®šç”¨æˆ·å’Œç”¨æˆ·ç»„ # passwd geoscene //è®¾ç½®å¯†ç geoscene 1.3 ä¿®æ”¹è®¡ç®—æœºåï¼š
# hostname //æŸ¥çœ‹è®¡ç®—æœºå # vi /etc/hostname ç¼–è¾‘æœºå™¨åä¸ºxcyteståä¿å­˜é€€å‡º # vi /etc/sysconfig/network æ–‡ä»¶ä¸­çš„hostnameä¿®æ”¹ä¸ºxcytest 1.4 ä¿®æ”¹hostsæ–‡ä»¶
# vi /etc/hosts 192.168.0.130 xcytest.portal.com xcytest //å¢åŠ é…ç½®ä¿¡æ¯ 1.5 æ£€æŸ¥ä¸»æœºåæ˜¯å¦ç”Ÿæ•ˆ
# hostname xcytest //è®©ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ # hostname -f //æŸ¥çœ‹å®Œå…¨é™å®šåŸŸå xcytest.portal.com 1.6 æ£€æŸ¥ç£ç›˜å¤§å°æƒ…å†µ
df -h ç¡®ä¿/home/å¾„è·¯ä¸‹å­˜å‚¨ç©ºé—´æ»¡è¶³è¦æ±‚ 1.7 å‡†å¤‡å®‰è£…åŒ… å®‰è£…åŒ…ï¼šgeoscene_datastoreã€geoscene_portalã€geoscne_serverã€geoscene_webadapter_java å°†å®‰è£…åŒ…ä¸Šä¼ åˆ°/home/geoscen/azb
...</p></div><footer class=entry-footer><span title='2024-07-10 11:04:49 +0800 CST'>July 10, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;291 words&nbsp;Â·&nbsp;langhaidian</footer><a class=entry-link aria-label="post link to geoscen serveråŸºç¡€éƒ¨ç½²-centos 7.6" href=https://langhaidian.github.io//posts/linux/geoscenserver2.0%E5%9F%BA%E7%A1%80%E9%83%A8%E7%BD%B2/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>iperfæµ‹è¯•å¸¦å®½</h2></header><div class=entry-content><p>æœ‰é¡¹ç›®éœ€æ±‚éœ€è¦æµ‹è¯•å±€åŸŸç½‘å†…å¸¦å®½ï¼Œç½‘ä¸Šæ•´ç†åè¾“å‡ºã€‚ è®¾ç½®æœåŠ¡å™¨ç«¯ iperf -s -w 2m ç¼“å­˜åŒº2må•å‘æµ‹è¯•ï¼Œ-sä»£è¡¨æœåŠ¡å™¨ç«¯
è®¾ç½®å®¢æˆ·ç«¯ iperf -c serverip -w 2m -t 30s -i 1s ç¼“å­˜åŒº2må•å‘æµ‹è¯•ï¼Œè¿è¡Œæ—¶é—´30ç§’ï¼Œæ¯ç§’æ˜¾ç¤ºä¸€æ¬¡ç»“æœ
iperf -c serverip -u -b 500M -w 2m -t 30s -i 1s æµ‹è¯•500må¸¦å®½ï¼Œä½¿ç”¨udpåè®®
å¸¸ç”¨é€‰é¡¹ï¼š -f, --format [kmKM] æŠ¥å‘Šæ ¼å¼ï¼šKbitsã€Mbitsã€KBytesã€MBytes -h, --help æ‰“å°å¸®åŠ©å¤§çº² -i, --interval n åœ¨å®šæœŸå¸¦å®½æŠ¥å‘Šä¹‹é—´æš‚åœ n ç§’ -l, --len n[KM] å°†è¯»/å†™ç¼“å†²åŒºé•¿åº¦è®¾ç½®ä¸º nï¼ˆé»˜è®¤ä¸º 8 KBï¼‰ -m, --print_mss æ‰“å° TCP æœ€å¤§æ•°æ®æ®µé•¿åº¦ï¼ˆMTU - TCP/IP æ ‡å¤´ï¼‰ -o, --output &lt;filename> å°†æŠ¥å‘Šæˆ–é”™è¯¯æ¶ˆæ¯è¾“å‡ºåˆ°æ­¤æŒ‡å®šæ–‡ä»¶ -p, --port n å°†è¦ä¾¦å¬/è¿æ¥çš„æœåŠ¡å™¨ç«¯å£è®¾ç½®ä¸º nï¼ˆé»˜è®¤ä¸º 5001ï¼‰ -u, --udp ä½¿ç”¨ UDP è€Œä¸æ˜¯ TCP -w, --window n[KM] TCP çª—å£å¤§å°ï¼ˆå¥—æ¥å­—ç¼“å†²åŒºå¤§å°ï¼‰ -B, --bind &lt;host> ç»‘å®šåˆ° &lt;host>ï¼Œæ¥å£æˆ–å¤šæ’­åœ°å€ -C, --compatibility ç”¨äºè¾ƒä½ç‰ˆæœ¬ï¼Œä¸å‘é€é¢å¤–æ¶ˆæ¯ -M, --mss n è®¾ç½® TCP æœ€å¤§æ•°æ®æ®µé•¿åº¦ï¼ˆMTU - 40 å­—èŠ‚ï¼‰ -N, --nodelay è®¾ç½® TCP no delayï¼Œç¦ç”¨ Nagle ç®—æ³• -v, --version æ‰“å°ç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º -V, --IPv6Version å°†åŸŸè®¾ç½®ä¸º IPv6 -x, --reportexclude [CDMSV] æ’é™¤ C(connection) D(data) M(multicast) S(settings) V(server) æŠ¥å‘Š -y, --reportstyle C|c æ˜¯å¦è®¾ç½® C æˆ– c æŠ¥å‘Šç»“æœä¸º CSVï¼ˆé€—å·åˆ†éš”å€¼ï¼‰ ç‰¹å®šäºæœåŠ¡å™¨çš„é€‰é¡¹ï¼š -s, --server åœ¨æœåŠ¡å™¨æ¨¡å¼ä¸‹è¿è¡Œ -U, --single_udp åœ¨å•çº¿ç¨‹ UDP æ¨¡å¼ä¸‹è¿è¡Œ -D, --daemon å°†æœåŠ¡å™¨ä½œä¸ºå®ˆæŠ¤ç¨‹åºè¿è¡Œ ç‰¹å®šäºå®¢æˆ·ç«¯çš„é€‰é¡¹ï¼š -b, --bandwidth n[KM] å°†ç›®æ ‡å¸¦å®½è®¾ç½®ä¸º n ä½/ç§’ï¼ˆé»˜è®¤ä¸º 1 Mbit/ç§’ï¼‰ã€‚æ­¤ è®¾ç½®éœ€è¦ UDP (-u)ã€‚ -c, --client &lt;host> åœ¨å®¢æˆ·ç«¯æ¨¡å¼ä¸‹è¿è¡Œï¼Œè¿æ¥åˆ° &lt;host> -d, --dualtest åŒæ—¶æ‰§è¡ŒåŒå‘æµ‹è¯• -n, --num n[KM] è¦ä¼ è¾“çš„å­—èŠ‚æ•°ï¼ˆè€Œä¸æ˜¯ -tï¼‰ -r, --tradeoff å•ç‹¬æ‰§è¡ŒåŒå‘æµ‹è¯• -t, --time n ä¼ è¾“æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ï¼ˆé»˜è®¤ä¸º 10 ç§’ï¼‰ -F, --fileinput &lt;name> ä»æ–‡ä»¶è¾“å…¥è¦ä¼ è¾“çš„æ•°æ® -I, --stdin ä» stdin è¾“å…¥è¦ä¼ è¾“çš„æ•°æ® -L, --listenport n æ¥æ”¶å›åŒå‘æµ‹è¯•çš„ç«¯å£ -P, --parallel n è¦å¹¶è¡Œè¿è¡Œçš„å®¢æˆ·ç«¯çº¿ç¨‹æ•° -T, --ttl n å¤šæ’­çš„å­˜æ´»æ—¶é—´ï¼ˆé»˜è®¤ä¸º 1ï¼‰ -Z, --linux-congestion &lt;algo> è®¾ç½® TCP æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼ˆä»…é™ Linuxï¼‰</p></div><footer class=entry-footer><span title='2024-07-10 11:04:49 +0800 CST'>July 10, 2024</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;207 words&nbsp;Â·&nbsp;langhaidian</footer><a class=entry-link aria-label="post link to iperfæµ‹è¯•å¸¦å®½" href=https://langhaidian.github.io//posts/linux/iperf%E6%B5%8B%E8%AF%95%E5%B8%A6%E5%AE%BD/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>raftç®—æ³•ä¸­æ–‡è®²è§£</h2></header><div class=entry-content><p>å¯»æ‰¾ä¸€ç§æ˜“äºç†è§£çš„ä¸€è‡´æ€§ç®—æ³•ï¼ˆæ‰©å±•ç‰ˆï¼‰ å¯»æ‰¾ä¸€ç§æ˜“äºç†è§£çš„ä¸€è‡´æ€§ç®—æ³•ï¼ˆæ‰©å±•ç‰ˆï¼‰ æ‘˜è¦ 1 ä»‹ç» 2 å¤åˆ¶çŠ¶æ€æœº 3 Paxos ç®—æ³•çš„é—®é¢˜ 4 ä¸ºäº†å¯ç†è§£æ€§çš„è®¾è®¡ 5 Raft ä¸€è‡´æ€§ç®—æ³• 5.1 Raft åŸºç¡€ 5.2 é¢†å¯¼äººé€‰ä¸¾ 5.3 æ—¥å¿—å¤åˆ¶ 5.4 å®‰å…¨æ€§ 5.4.1 é€‰ä¸¾é™åˆ¶ 5.4.2 æäº¤ä¹‹å‰ä»»æœŸå†…çš„æ—¥å¿—æ¡ç›® 5.4.3 å®‰å…¨æ€§è®ºè¯ 5.5 è·Ÿéšè€…å’Œå€™é€‰äººå´©æºƒ 5.6 æ—¶é—´å’Œå¯ç”¨æ€§ 6 é›†ç¾¤æˆå‘˜å˜åŒ– 7 æ—¥å¿—å‹ç¼© 8 å®¢æˆ·ç«¯äº¤äº’ 9 ç®—æ³•å®ç°å’Œè¯„ä¼° 9.1 å¯ç†è§£æ€§ 9.2 æ­£ç¡®æ€§ 9.3 æ€§èƒ½ 10 ç›¸å…³å·¥ä½œ 11 ç»“è®º 12 æ„Ÿè°¢ å‚è€ƒ æ‘˜è¦ Raft æ˜¯ä¸€ç§ä¸ºäº†ç®¡ç†å¤åˆ¶æ—¥å¿—çš„ä¸€è‡´æ€§ç®—æ³•ã€‚å®ƒæä¾›äº†å’Œ Paxos ç®—æ³•ç›¸åŒçš„åŠŸèƒ½å’Œæ€§èƒ½ï¼Œä½†æ˜¯å®ƒçš„ç®—æ³•ç»“æ„å’Œ Paxos ä¸åŒï¼Œä½¿å¾— Raft ç®—æ³•æ›´åŠ å®¹æ˜“ç†è§£å¹¶ä¸”æ›´å®¹æ˜“æ„å»ºå®é™…çš„ç³»ç»Ÿã€‚ä¸ºäº†æå‡å¯ç†è§£æ€§ï¼ŒRaft å°†ä¸€è‡´æ€§ç®—æ³•åˆ†è§£æˆäº†å‡ ä¸ªå…³é”®æ¨¡å—ï¼Œä¾‹å¦‚é¢†å¯¼äººé€‰ä¸¾ã€æ—¥å¿—å¤åˆ¶å’Œå®‰å…¨æ€§ã€‚åŒæ—¶å®ƒé€šè¿‡å®æ–½ä¸€ä¸ªæ›´å¼ºçš„ä¸€è‡´æ€§æ¥å‡å°‘éœ€è¦è€ƒè™‘çš„çŠ¶æ€çš„æ•°é‡ã€‚ä¸€é¡¹ç”¨æˆ·ç ”ç©¶çš„ç»“æœè¡¨æ˜ï¼Œå¯¹äºå­¦ç”Ÿè€Œè¨€ï¼ŒRaft ç®—æ³•æ¯” Paxos ç®—æ³•æ›´åŠ å®¹æ˜“å­¦ä¹ ã€‚Raft ç®—æ³•è¿˜åŒ…æ‹¬ä¸€ä¸ªæ–°çš„æœºåˆ¶æ¥å…è®¸é›†ç¾¤æˆå‘˜çš„åŠ¨æ€æ”¹å˜ï¼Œå®ƒåˆ©ç”¨é‡å çš„å¤§å¤šæ•°æ¥ä¿è¯å®‰å…¨æ€§ã€‚
1 ä»‹ç» ä¸€è‡´æ€§ç®—æ³•å…è®¸ä¸€ç»„æœºå™¨åƒä¸€ä¸ªæ•´ä½“ä¸€æ ·å·¥ä½œï¼Œå³ä½¿å…¶ä¸­ä¸€äº›æœºå™¨å‡ºç°æ•…éšœä¹Ÿèƒ½å¤Ÿç»§ç»­å·¥ä½œä¸‹å»ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œä¸€è‡´æ€§ç®—æ³•åœ¨æ„å»ºå¯ä¿¡èµ–çš„å¤§è§„æ¨¡è½¯ä»¶ç³»ç»Ÿä¸­æ‰®æ¼”ç€é‡è¦çš„è§’è‰²ã€‚åœ¨è¿‡å»çš„ 10 å¹´é‡Œï¼ŒPaxos ç®—æ³•ç»Ÿæ²»ç€ä¸€è‡´æ€§ç®—æ³•è¿™ä¸€é¢†åŸŸï¼šç»å¤§å¤šæ•°çš„å®ç°éƒ½æ˜¯åŸºäº Paxos æˆ–è€…å—å…¶å½±å“ã€‚åŒæ—¶ Paxos ä¹Ÿæˆä¸ºäº†æ•™å­¦é¢†åŸŸé‡Œè®²è§£ä¸€è‡´æ€§é—®é¢˜æ—¶çš„ç¤ºä¾‹ã€‚
...</p></div><footer class=entry-footer><span title='2024-07-10 11:04:49 +0800 CST'>July 10, 2024</span>&nbsp;Â·&nbsp;8 min&nbsp;Â·&nbsp;1565 words&nbsp;Â·&nbsp;langhaidian</footer><a class=entry-link aria-label="post link to raftç®—æ³•ä¸­æ–‡è®²è§£" href=https://langhaidian.github.io//posts/linux/raft-zh_cn/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>centos7ç¦»çº¿å®‰è£…docker</h2></header><div class=entry-content><p>å†…ç½‘ç¯å¢ƒcentos 7.2éœ€è¦å®‰è£…dockerï¼Œå¹¶è¿è¡Œç›¸å…³ç³»ç»Ÿ 1. æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ uname -msr 2. æ›´æ–°è½¯ä»¶ç‰ˆæœ¬ docker run â€“rm -v ${PWD}/bin:/tmp -it centos:7.6.1810 bash
In the online container: cd /tmp yum-config-manager â€“add-repo=https://download.docker.com/linux/centos/docker-ce.repo yum install -y yum-utils yum makecache fast yum list docker-ce â€“showduplicates | sort -r yumdownloader â€“resolve docker-ce-18.06.3.ce-3.el7 docker-ce-cli-24.0.7-1.el7 containerd.io-1.6.27-3.1.el7 docker-buildx-plugin-0.11.2-1.el7 docker-compose-plugin-2.21.0-1.el7 yum-utils
rpm -ivh â€“replacefiles â€“replacepkgs .rpm rpm -ivh ./openssh74pl/.rpm â€“force â€“nodeps
docker run â€“rm -v ${PWD}/bin:/tmp -it debian:11.7 bash
é»˜è®¤å­˜æ”¾ä¸‹è½½çš„debæ–‡ä»¶çš„è·¯å¾„æ˜¯ /var/cache/apt/archives
apt install â€“download-only xxxx
...</p></div><footer class=entry-footer><span title='2024-06-10 11:04:49 +0800 CST'>June 10, 2024</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;80 words&nbsp;Â·&nbsp;langhaidian</footer><a class=entry-link aria-label="post link to centos7ç¦»çº¿å®‰è£…docker" href=https://langhaidian.github.io//posts/linux/cnetos7%E5%B0%8F%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85docker/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>debian 11åŸºç¡€ç¯å¢ƒå‡†å¤‡</h2></header><div class=entry-content><p>1. æ›¿æ¢é»˜è®¤æº cat &lt;&lt; EOF > /etc/apt/sources.list # Official sources.list deb http://deb.debian.org/debian bullseye main contrib non-free deb-src http://deb.debian.org/debian bullseye main contrib non-free deb http://deb.debian.org/debian bullseye-updates main contrib non-free deb-src http://deb.debian.org/debian bullseye-updates main contrib non-free deb http://deb.debian.org/debian bullseye-backports main contrib non-free deb-src http://deb.debian.org/debian bullseye-backports main contrib non-free deb http://security.debian.org/debian-security/ bullseye-security main contrib non-free deb-src http://security.debian.org/debian-security/ bullseye-security main contrib non-free EOF æ›´æ–°ç³»ç»Ÿï¼š sudo apt update #æ›´æ–°æº sudo apt upgrade #æ›´æ–°å·²å®‰è£…çš„åŒ… sudo apt dist-upgrade #å‡çº§ç³»ç»Ÿ sudo apt clean && sudo apt autoclean #æ¸…ç†ä¸‹è½½æ–‡ä»¶çš„å­˜æ¡£ 2. ç»™rootè´¦æˆ·è®¾ç½®æˆ–è€…ä¿®æ”¹å¯†ç  passwd root 3. å®‰è£…sudo apt install sudo **ç»™æ™®é€šç”¨æˆ·æ·»åŠ sudoæƒé™ usermod -a -G sudo XXXX 4. é»˜è®¤rootç¦æ­¢sshè¿œç¨‹ç™»å½•(æ¨èä¿æŒé»˜è®¤) ä¿®æ”¹é…ç½®æ–‡ä»¶ sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak sudo vi /etc/ssh/sshd_config #Authentication: #LoginGraceTime 2m #PermitRootLogin prohibit-password #StrictModes yes #MaxAuthTries 6 #MaxSessions 10 #PubkeyAuthentication yes å¢åŠ ä¸€å¥ PermitRootLogin yes å¿«é€Ÿé…ç½®ï¼š sudo sed -i "/^#PermitRootLogin/c"PermitRootLogin" " yes"" /etc/ssh/sshd_config è¡¥å……ï¼š PermitRootLogin prohibit-password #å…è®¸ root ç™»å½•ï¼Œä½†ç¦æ­¢é€‚ç”¨å¯†ç è®¤è¯ å¯ä»¥é…åˆä½¿ç”¨ Pubkey è®¤è¯ï¼Œä¿®æ”¹ PubkeyAuthentication yes é‡å¯æœåŠ¡ç”Ÿæ•ˆï¼š sudo systemctl restart ssh 5. é…ç½®ç½‘ç»œ vim /etc/network/interfaces ============ # ä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š iface lo inet loopback auto lo auto eth0 iface eth0 inet static address 10.10.1.5 netmask 255.255.255.0 #broadcast 10.10.1.255 #å¯é€‰ï¼Œä¸Šè¿°é…ç½®äº†æ©ç  #network 10.10.1.0 #å¯é€‰ï¼Œä¸Šè¿°é…ç½®äº†æ©ç  gateway 10.10.1.1 #dns-domain sysin.org # domain å’Œ search ä¸èƒ½å…±å­˜ï¼›å¦‚æœåŒæ—¶å­˜åœ¨ï¼Œåé¢å‡ºç°çš„å°†ä¼šè¢«ä½¿ç”¨ã€‚ dns-search sysin.org dns-nameservers 10.10.1.1 8.8.8.8 #æ³¨æ„ debian 11 é»˜è®¤æ²¡æœ‰å®‰è£… resolvconfï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨åœ¨ resolv.conf ä¸­ç¼–è¾‘ DNS ============ # æˆ–è€…å®‰è£… resolvconf åï¼Œåœ¨è¿™é‡Œé…ç½®ï¼Œå°†è‡ªåŠ¨æ›´æ–° resolv.conf sudo apt install resolvconf # iface eth0 inet6 auto #ipv6 è‡ªåŠ¨é…ç½®ï¼Œä¸å†™åˆ™è¡¨ç¤ºç¦ç”¨äº† ============ # DHCP é…ç½®å¦‚ä¸‹ï¼š auto eth0 iface eth0 inet dhcp ============= # é…ç½® DNS cat /etc/resolv.conf #å¦‚æœå·²ç»å®‰è£… resolvconfï¼Œä¸è¦æ‰‹åŠ¨ç¼–è¾‘ï¼Œç›´æ¥åœ¨ä¸Šè¿° interfaces ä¸­ç¼–è¾‘ dns ============= # é‡å¯ç½‘ç»œ sudo systemctl restart networking #sudo service networking restart ================= é…ç½®å¤šä¸ªip auto eth0:0 iface eth0:0 inet static address 192.168.1.90 netmask 255.255.255.0 auto eth0:1 iface eth0:1 inet static address 192.168.1.91 netmask 255.255.255.0 gateway 192.168.1.1 ======= #æ·»åŠ é™æ€è·¯ç”±ä¿¡æ¯ cat >> /etc/network/interfaces &lt;&lt;EOF # static routes up ip route add 10.10.12.0/24 via 10.10.1.1 dev eth0 up ip route add 10.10.13.0/24 via 10.10.1.1 dev eth0 up ip route add 10.10.14.0/24 via 10.10.1.1 dev eth0 up ip route add 10.10.15.0/24 via 10.10.1.1 dev eth0 up ip route add 10.10.16.0/24 via 10.10.1.1 dev eth0 EOF #é‡å¯ç½‘ç»œ systemctl restart networking #éªŒè¯ ip route 6. ä¿®æ”¹ä¸»æœºå vim /etc/hostname hostnamectl set-hostname debian-01 --static vim /etc/hosts # æ·»åŠ ä¸€è¡Œ 127.0.0.1 debian01.sysin.org debian01 # æ³¨æ„è¿™é‡Œçš„æ ¼å¼ï¼ŒIP åé¢å…ˆå†™ FQDN å†å†™ä¸»æœºåï¼Œä¸ CentOS ç›¸åŒ # å…ˆå†™ FQDN åå†™ä¸»æœºåï¼Œé¡ºåºåäº†ä¸å½±å“è§£æï¼Œä½†æ˜¯'hostname -f'å‘½ä»¤æ— æ³•æ˜¾ç¤º FQDNï¼Œåªèƒ½æ˜¾ç¤ºä¸»æœºå 7. å®‰è£…intelæ— çº¿ç½‘å¡ æŸ¥çœ‹ç½‘çº¿è®¾å¤‡ä¿¡æ¯ lspci -nn å®‰è£…wifié©±åŠ¨åŒ… apt update && apt install firmware-iwlwifi é‡æ–°åŠ è½½wifiæ¨¡å— modprobe -r iwlwifi ; modprobe iwlwifi 8. ä¿®æ”¹é»˜è®¤ulimtå‚æ•° cat &lt;&lt; EOF >> /etc/security/limits.conf * soft nofile 65535 * hard nofile 65535 * soft nproc 65535 * hard nproc 65535 EOF cat &lt;&lt; EOF > /etc/security/limits.d/20-nproc.conf * soft nproc 65535 root soft nproc unlimited EOF 9. å®‰è£…openjdk8 ##sudo apt install apt-transport-https ca-certificates wget dirmngr gnupg software-properties-common wget -qO - https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public | sudo apt-key add - sudo add-apt-repository --yes https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/ sudo apt-get update && sudo apt-get install adoptopenjdk-8-hotspot sudo apt update sudo apt install adoptopenjdk-8-hotspot 10. å®‰è£…dockeråŠdocker-compose ## å¸è½½æ—§ç‰ˆæœ¬è½¯ä»¶ sudo apt-get remove docker docker-engine docker.io containerd runc ## å®‰è£…ä¾èµ– sudo apt-get update sudo apt-get install \ ca-certificates \ curl \ gnupg \ lsb-release ## å¯¼å…¥gpg key curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg ## æ·»åŠ ä»“åº“ echo \ "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian \ $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null ## å¼€å§‹å®‰è£… sudo apt-get update sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin 11. è®¾ç½®æ—¶åŒº é€šè¿‡timedatectlè¿›è¡Œè®¾ç½® æ£€æŸ¥å½“å‰æ—¶åŒº: timedatectl Local time: Fri 2020-04-03 19:23:29 UTC Universal time: Fri 2020-04-03 19:23:29 UTC RTC time: Fri 2020-04-03 19:23:29 Time zone: UTC (UTC, +0000) ..... ##æ›´æ”¹æ—¶åŒº timedatectl list-timezones ï½œ grep Shanghai ##è¿‡æ»¤ä¸Šæµ·æ—¶åŒº sudo timedatectl set-timezone your_time_zone ##æ›´æ”¹æ—¶åŒº sudo timedatectl set-timezone Asia/Shanghai ##è®¾ç½®ä¸Šæµ·æ—¶åŒº ##æŸ¥çœ‹å’ŒéªŒè¯æ—¶åŒº timedatectl Local time: Fri 2020-04-03 13:30:30 CST Universal time: Fri 2020-04-03 19:30:30 UTC RTC time: Fri 2020-04-03 19:30:30 Time zone: America/Monterrey (CST, -0600) ....... date ## æŸ¥çœ‹å…·ä½“æ—¶é—´ é€šè¿‡è½¯è¿æ¥è¿›è¡Œè®¾ç½® è¾ƒæ—§ç‰ˆæœ¬debianï¼Œæ²¡æœ‰timedatectlå¯ä»¥é€šè¿‡è½¯è¿æ¥è¿›è¡Œè®¾ç½®ï¼Œå¯ä»¥é€šè¿‡/etc/localtimeæ–‡ä»¶ç¬¦å·é“¾æ¥åˆ°/usr/share/zoShanghai
...</p></div><footer class=entry-footer><span title='2024-06-10 11:04:49 +0800 CST'>June 10, 2024</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;691 words&nbsp;Â·&nbsp;langhaidian</footer><a class=entry-link aria-label="post link to debian 11åŸºç¡€ç¯å¢ƒå‡†å¤‡" href=https://langhaidian.github.io//posts/linux/debian11/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>centos7å†…æ ¸4.19å‡çº§åˆ°5.14</h2></header><div class=entry-content><p>æœ€è¿‘ç¢°åˆ°æ­å»ºæµ‹è¯•k8sç¯å¢ƒï¼Œç³»ç»Ÿç‰ˆæœ¬å¤ªä½å¯¼è‡´å¾ˆå¤šé—®é¢˜ï¼Œè¿›è¡Œgoogleåæ•´ç†çš„å‡çº§æ­¥éª¤ï¼Œä¾›å‚è€ƒã€‚ 1. æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ uname -msr 2. æ›´æ–°è½¯ä»¶ç‰ˆæœ¬ sudo yum -y update 3. å¯¼å…¥eplr rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org 4. ELRepo yum install https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm 5. æŸ¥æ‰¾ç°æœ‰å†…æ ¸ç‰ˆæœ¬ yum list available --disablerepo='*' --enablerepo=elrepo-kernel * MLä¸ºä¸»çº¿ç‰ˆæœ¬ï¼ŒLTä¸ºé•¿æœŸæ”¯æŒç‰ˆæœ¬ 6. å®‰è£…å†…æ ¸ç‰ˆæœ¬ sudo yum --enablerepo=elrepo-kernel install kernel-lt 7. åˆ é™¤æ—§ç‰ˆæœ¬tools yum remove kernel-tools-libs.x86_64 kernel.x86_64 -y yum remove kernel-tools-libs.x86_64 kernel-tools.x86_64 -y 8. å®‰è£…å·¥å…·åŒ… yum --disablerepo=\* --enablerepo=elrepo-kernel install kernel-lt-tools.x86_64 -y 9. é‡å¯æ‰‹åŠ¨é€‰æ‹©å†…æ ¸è¿›å…¥ç³»ç»Ÿæ£€æŸ¥ç³»ç»Ÿæƒ…å†µ reboot 10. æŸ¥çœ‹æ‰€æœ‰å¯åŠ¨å†…æ ¸ awk -F \' '$1=="menuentry " {print i++ " : " $2}' /etc/grub2.cfg ä¿®æ”¹é»˜è®¤å¯åŠ¨å†…æ ¸ï¼šgrub2-set-default 0 11. ç¼–è¾‘å¯åŠ¨é¡ºåº sudo vim /etc/default/grub --------------------- * Once the file opens, look for the line that says GRUB_DEFAULT=X, and change it to GRUB_DEFAULT=0 (zero). * This line will instruct the boot loader to default to the first kernel on the list, which is the latest. å°†GRUB_DEFAULT=X ä¿®æ”¹æˆGRUB_DEFAULT=0 åŠ è½½ç¬¬ä¸€ä¸ªå†…æ ¸ç‰ˆæœ¬å¹¶ä¸”ä¸ºæœ€åä¸€ä¸ªç‰ˆæœ¬ 12. æ›´æ–°å¯åŠ¨é…ç½®æ–‡ä»¶ sudo grub2-mkconfig -o /boot/grub2/grub.cfg 13. æŸ¥çœ‹å¯åŠ¨é¡ºåº grub2-editenv list 14. é‡å¯éªŒè¯ reboot</p></div><footer class=entry-footer><span title='2024-05-10 11:04:49 +0800 CST'>May 10, 2024</span>&nbsp;Â·&nbsp;1 min&nbsp;Â·&nbsp;137 words&nbsp;Â·&nbsp;langhaidian</footer><a class=entry-link aria-label="post link to centos7å†…æ ¸4.19å‡çº§åˆ°5.14" href=https://langhaidian.github.io//posts/linux/cnetos7%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>containerdå®‰è£…</h2></header><div class=entry-content><p>debian 11å®‰è£…(å»ºè®®debianå†…æ ¸ä¸º5.11ä»¥å)
éœ€è¦å®‰è£…å†…å®¹ containerdã€runcã€CNI pluginsã€nerdctl(å®¢æˆ·ç«¯) å®‰è£…containerd a. è¿›å…¥ä¸‹è½½å¯¹åº”ç‰ˆæœ¬https://github.com/containerd/containerd/releases wget https://github.com/containerd/containerd/releases/download/v1.7.2/containerd-1.7.2-linux-amd64.tar.gz b. shell> tar Cxzvf /usr/local containerd-1.6.2-linux-amd64.tar.gz bin/ c. é…ç½®å¼€æœºå¯åŠ¨æœåŠ¡ æœåŠ¡é…ç½®æ–‡ä»¶å†…å®¹ï¼šhttps://raw.githubusercontent.com/containerd/containerd/main/containerd.service vim /etc/systemd/system/containerd.service ---------------- # Copyright The containerd Authors. # # Licensed under the Apache License, Version 2.0 (the "License"); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an "AS IS" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. [Unit] Description=containerd container runtime Documentation=https://containerd.io After=network.target local-fs.target [Service] #uncomment to enable the experimental sbservice (sandboxed) version of containerd/cri integration #Environment="ENABLE_CRI_SANDBOXES=sandboxed" ExecStartPre=-/sbin/modprobe overlay ExecStart=/usr/local/bin/containerd Type=notify Delegate=yes KillMode=process Restart=always RestartSec=5 # Having non-zero Limit*s causes performance problems due to accounting overhead # in the kernel. We recommend using cgroups to do container-local accounting. LimitNPROC=infinity LimitCORE=infinity LimitNOFILE=infinity # Comment TasksMax if your systemd version does not supports it. # Only systemd 226 and above support this version. TasksMax=infinity OOMScoreAdjust=-999 [Install] WantedBy=multi-user.target ----------------- shell> systemctl daemon-reload shell> systemctl enable --now containerd å®‰è£…runc ä¸‹è½½å¯¹åº”å®‰è£…æ–‡ä»¶ï¼šhttps://github.com/opencontainers/runc/releases shell> install -m 755 runc.amd64 /usr/local/sbin/runc å®‰è£…CNI plugins ä¸‹è½½å¯¹åº”å®‰è£…æ–‡ä»¶ï¼šhttps://github.com/containernetworking/plugins/releases shell> mkdir -p /opt/cni/bin shell> tar Cxzvf /opt/cni/bin cni-plugins-linux-amd64-v1.1.1.tgz å®‰è£…nerdctl ä¸‹è½½å¯¹åº”å®‰è£…æ–‡ä»¶ï¼šhttps://github.com/containerd/nerdctl/releases shell> tar Cxzvvf /usr/local/bin nerdctl-1.4.0-linux-amd64.tar.gz é…ç½®ï¼šRootless a. å®‰è£…ä¾èµ–ï¼š shell> sudo apt-get purge apparmor apparmor-utils auditd shell> sudo apt-get install uidmap shell> sudo apt-get install slirp4netns ç‰¹æ®Šé…ç½®ï¼š 1. å¼€å¯overlay echo "options overlay permit_mounts_in_userns=1" > /etc/modprobe.d/mdadm.conf 2. å¼€å¯é…ç½®cgroup v2 shell> vim /etc/default/grub ------ GRUB_CMDLINE_LINUX="systemd.unified_cgroup_hierarchy=1" ------ shell> sudo update-grub. -------- Enabling CPU, CPUSET, and I/O delegation $ cat /sys/fs/cgroup/user.slice/user-$(id -u).slice/user@$(id -u).service/cgroup.controllers memory pids $ sudo mkdir -p /etc/systemd/system/user@.service.d $ cat &lt;&lt;EOF | sudo tee /etc/systemd/system/user@.service.d/delegate.conf [Service] Delegate=cpu cpuset io memory pids EOF $ sudo systemctl daemon-reload --------- shell> containerd-rootless-setuptool.sh install iptable é—®é¢˜ï¼š I had the same issue and in my system (debian bullseye) iptables and ip6tables was installed only under /usr/sbin. A quick fix was to make a link in /usr/local/bin ln -s /usr/sbin/iptables /usr/local/bin/iptables ln -s /usr/sbin/ip6tables /usr/local/bin/ip6tables</p></div><footer class=entry-footer><span title='2024-05-10 11:04:49 +0800 CST'>May 10, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;353 words&nbsp;Â·&nbsp;langhaidian</footer><a class=entry-link aria-label="post link to containerdå®‰è£…" href=https://langhaidian.github.io//posts/linux/containerd%E5%AE%89%E8%A3%85/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://langhaidian.github.io/page/2/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2024 <a href=https://langhaidian.github.io/>langhaidian</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script src=https://cdn.jsdelivr.net/npm/@waline/client></script></body></html>